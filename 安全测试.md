# 安全测试操作手册（SOP）

**适用范围**：Vue/React 前端 + Spring Boot 后端 Web 系统
**执行人员**：项目经理 / 产品经理 / 前端 / 后端兼职测试
**测试目标**：发现并阻止常见安全漏洞，防止数据泄露、业务被攻击、权限被绕过等风险

---

## 一、测试原则

1. **最小权限原则**：任何用户只能访问、操作与其权限相关的数据和功能。
2. **输入即不可信**：所有用户输入都可能是恶意的，前后端都需验证。
3. **测试可重复**：记录测试步骤、使用的账号与数据，便于回归测试。

---

## 二、测试优先级定义

* **高优先级**：一旦漏洞存在，可能导致数据泄露、业务中断或被攻击利用（必须在上线前修复）
* **中优先级**：会影响部分功能或数据安全，需尽快修复
* **低优先级**：影响较小但会降低系统安全性，建议后续版本修复

---

## 三、安全测试项目及操作方法

### 1. 权限与访问控制测试（优先级：高）

**测试目标**：防止越权访问、水平/垂直越权漏洞

| 测试项   | 操作方法                              | 预期结果           | 不通过可能后果              |
| ----- | --------------------------------- | -------------- | -------------------- |
| 水平越权  | 用普通用户账号，尝试访问其他用户的资源（改 URL ID 或参数） | 拒绝访问 / 返回无权限提示 | 其他用户数据被查看或修改，造成隐私泄露  |
| 垂直越权  | 用低权限账号尝试访问管理端接口                   | 拒绝访问 / 登录页重定向  | 低权限用户获取管理员功能，造成系统被控制 |
| 未登录访问 | 清除 Cookie 后直接访问后台 URL             | 自动跳转到登录页       | 未授权访问后台页面，数据泄露       |

---

### 2. 输入与输出安全测试（优先级：高）

**测试目标**：防止 XSS、SQL 注入等

| 测试项      | 操作方法                                       | 预期结果             | 不通过可能后果                     |
| -------- | ------------------------------------------ | ---------------- | --------------------------- |
| XSS 攻击测试 | 在输入框输入 `<script>alert('xss')</script>` 并提交 | 页面显示转义后的字符，不执行脚本 | 攻击者可注入恶意 JS，窃取 Cookie 或篡改页面 |
| SQL 注入测试 | 在搜索框输入 `1' OR '1'='1` 等语句                  | 返回正常提示或空结果       | 数据库被篡改、数据泄露                 |
| 文件上传安全   | 上传非图片类型（如 `.php`、`.exe`）                   | 拒绝上传，提示错误        | 服务器被植入恶意程序                  |

---

### 3. 认证机制测试（优先级：高）

**测试目标**：防止账号被暴力破解、会话被劫持

| 测试项    | 操作方法                | 预期结果       | 不通过可能后果        |
| ------ | ------------------- | ---------- | -------------- |
| 弱密码检测  | 用简单密码注册（如 123456）   | 提示密码强度不足   | 账号易被破解，造成系统入侵  |
| 暴力破解防护 | 连续输错密码 5 次          | 账号锁定或出现验证码 | 攻击者可持续尝试密码直至成功 |
| 会话固定   | 登录后复制 Cookie，换浏览器使用 | 会话失效       | 攻击者可劫持用户会话登录   |

---

### 4. 接口安全测试（优先级：中）

**测试目标**：防止 API 被未授权调用

| 测试项  | 操作方法                | 预期结果       | 不通过可能后果     |
| ---- | ------------------- | ---------- | ----------- |
| 接口鉴权 | 用 Postman 调用需要登录的接口 | 返回 401 未授权 | 数据接口被外部直接调用 |
| 参数篡改 | 修改接口参数提交            | 返回校验失败     | 数据被伪造或篡改    |

---

### 5. 数据传输安全测试（优先级：中）

**测试目标**：确保数据在网络中安全传输

| 测试项      | 操作方法               | 预期结果          | 不通过可能后果      |
| -------- | ------------------ | ------------- | ------------ |
| HTTPS 检查 | 浏览器访问是否为 HTTPS     | 必须是 HTTPS     | 数据明文传输被中间人攻击 |
| 敏感数据加密   | 截取请求数据包（F12 或抓包工具） | 密码等敏感信息不可明文出现 | 密码被截获，账号泄露   |

---

### 6. 安全配置检查（优先级：低）

| 测试项    | 操作方法              | 预期结果     | 不通过可能后果       |
| ------ | ----------------- | -------- | ------------- |
| 错误信息暴露 | 制造错误操作（如访问不存在的接口） | 返回友好错误信息 | 暴露服务器路径或技术栈信息 |
| 版本信息隐藏 | 查看页面源代码 / HTTP 头  | 不应暴露框架版本 | 攻击者利用已知漏洞版本攻击 |

---

## 四、测试工具推荐

* **Postman**：接口测试
* **OWASP ZAP**：常见漏洞扫描
* **Chrome DevTools**：调试与请求分析
* **Burp Suite（社区版）**：抓包与请求篡改

---

## 五、问题处理流程

1. 记录漏洞复现步骤、截图或视频
2. 标记优先级（高 / 中 / 低）
3. 交由开发修复
4. 回归测试确认漏洞已关闭

---

## 六、安全测试未通过上线可能造成的后果

* 用户数据泄露（法律与合规风险）
* 系统被攻击者控制（业务中断、数据被删改）
* 财务损失（虚假交易、资金被盗）
* 品牌信誉受损，用户流失

---
