# 性能测试操作手册（SOP）

**适用范围**：Vue/React 前端 + Spring Boot 后端 Web 系统
**执行人员**：项目经理 / 前端 / 后端兼职测试
**测试目标**：在不同压力下验证系统稳定性、响应速度、并发处理能力，提前发现性能瓶颈。

---

## 一、测试原则

1. **尽量模拟真实业务场景**：测试数据、接口调用顺序与生产环境保持一致。
2. **逐步增加压力**：从小流量开始，逐步提升到目标并发量，避免直接全压导致无效结果。
3. **测试与分析分开**：测试人员负责执行测试，性能瓶颈分析可由开发参与。
4. **可重复性**：保存测试计划与数据，便于回归对比。

---

## 二、测试优先级定义

* **高优先级**：影响核心业务交易、关键接口响应速度、系统稳定性
* **中优先级**：影响部分功能或用户体验
* **低优先级**：非核心功能的响应速度问题

---

## 三、性能测试类型及操作方法

### 1. 接口性能测试（优先级：高）

**目标**：验证后端 API 在并发下的响应时间与稳定性。

**操作步骤（以 JMeter 为例）**：

1. 新建测试计划 → 添加线程组（设置并发用户数、递增时间、循环次数）
2. 添加 HTTP 请求，配置接口 URL、请求方式与参数
3. 添加监听器（聚合报告、响应时间分布）
4. 运行测试并记录：

   * 平均响应时间（Avg）
   * 90/95/99 分位响应时间（P90/P95/P99）
   * 错误率（Error%）
5. 对比目标指标（如 Avg < 500ms，Error% < 1%）

**不通过可能后果**：

* 用户在高并发下无法正常使用核心功能
* 接口超时导致前端卡死、交易失败

---

### 2. 页面性能测试（优先级：中）

**目标**：验证前端页面加载速度与首屏渲染时间。

**操作步骤**：

1. 使用 **Lighthouse（Chrome DevTools 内置）** 或 **WebPageTest** 测试页面加载性能
2. 重点关注：

   * 首屏渲染时间（FCP）
   * 完全加载时间（Load Time）
   * 资源大小与请求数量
3. 调整优化方案（懒加载、压缩资源、CDN 加速）

**不通过可能后果**：

* 用户首次访问等待过长导致流失
* 高并发下页面渲染延迟明显

---

### 3. 并发/压力测试（优先级：高）

**目标**：验证系统最大承载能力，确定临界点。

**操作步骤（JMeter）**：

1. 选取 3\~5 个核心业务场景（如登录、下单、查询）
2. 在 JMeter 中录制或手动配置场景脚本
3. 设置逐步提升并发（如 50 → 100 → 200 → 500 用户）
4. 记录系统在不同并发下：

   * 平均响应时间
   * CPU/内存占用（用 **VisualVM** 或服务器监控）
   * 错误率
5. 确定系统性能瓶颈（代码优化 / 数据库优化 / 硬件扩容）

**不通过可能后果**：

* 高峰期直接崩溃，导致业务中断
* 部分用户无法完成交易或提交表单

---

### 4. 稳定性测试（优先级：中）

**目标**：验证系统在长时间运行下的稳定性（6-24 小时）。

**操作步骤**：

1. 在 JMeter 设置持续请求（如每秒 5-10 个请求，持续 12 小时）
2. 记录运行过程中的：

   * 内存泄漏（JVM Heap 使用曲线持续上升）
   * 线程数异常增长
   * 响应时间逐渐变长
3. 分析日志，排查资源释放问题

**不通过可能后果**：

* 系统运行时间长后逐渐变慢甚至宕机
* 无法保证 7x24 小时服务可用性

---

### 5. 数据库性能测试（优先级：高）

**目标**：验证数据库在大数据量、高并发下的响应能力。

**操作步骤**：

1. 使用 JMeter 模拟批量 SQL 查询（通过 JDBC 连接）
2. 测试不同索引策略下的响应时间
3. 检查慢查询日志（MySQL `slow_query_log`）
4. 优化 SQL、增加缓存（Redis 等）

**不通过可能后果**：

* 核心业务查询超时
* 数据库锁表导致全站瘫痪

---

## 四、性能测试指标参考

| 指标           | 说明            | 建议目标值         |
| ------------ | ------------- | ------------- |
| Avg 响应时间     | 平均接口响应时长      | < 500ms（核心接口） |
| P95 响应时间     | 95% 请求的最大响应时间 | < 1s          |
| 错误率          | 请求失败比例        | < 1%          |
| 并发承载量        | 同时在线可处理的用户数   | 根据业务目标设定      |
| 吞吐量（TPS/QPS） | 每秒事务/请求数      | 满足业务高峰需求      |

---

## 五、推荐工具

* **Apache JMeter**（开源、功能强大）
* **k6**（轻量、脚本友好，适合开发直接编写测试）
* **Locust**（Python 编写，灵活可扩展）
* **Lighthouse**（前端性能评测）

---

## 六、问题处理流程

1. 记录性能问题场景、数据、截图
2. 分析瓶颈（代码 / 数据库 / 配置 / 硬件）
3. 提交优化方案并实施
4. 回归测试验证性能提升

---

## 七、性能测试未通过上线可能造成的后果

* 高并发场景下系统直接宕机
* 核心交易或功能长时间无响应
* 用户流失、投诉率上升
* 运营损失与品牌信誉受损

---
